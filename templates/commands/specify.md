---
description: 在模块目录中创建详细的功能规范，沉淀业务需求和验收标准
scripts:
  sh: .specify/scripts/bash/create-module-spec.sh --json "{ARGS}"
  ps: .specify/scripts/powershell/create-module-spec.ps1 -Json "{ARGS}"
---

在当前模块目录中创建功能规范文档，为后续的plan和tasks阶段提供明确的需求基础。

**适配模块化架构：支持在任意模块目录中执行，生成该模块的spec.md**

执行步骤：

1. 运行 `{SCRIPT}` 获取当前模块路径和上下文信息，解析MODULE_PATH和SPEC_FILE路径
2. 检查当前是否在有效的模块目录中（specs/modules/xxx/）
3. 如果不在模块目录，提示用户先执行 `/module` 或进入模块目录
4. 加载 `.specify/templates/spec-template.md` 了解规范的章节结构
5. 基于用户提供的功能描述创建详细的需求规范：
   - 使用模板结构，替换占位符为实际内容
   - 生成符合EARS格式的需求条目
   - 包含完整的验收标准和业务规则
   - 确保需求专注业务功能，避免技术实现细节

6. 将完整的规范文档写入当前模块的 `spec.md` 文件
7. 报告完成状态，包括模块路径、规范文件位置，以及下一步执行 `/plan` 的指导

**模块化特性**：
- 自动识别当前模块上下文和依赖关系
- 支持模块间需求的引用和关联
- 为大型项目的需求管理提供结构化支持
- 每个模块的需求独立管理，支持并行开发

**需求沉淀原则**：
- 专注业务价值和用户需求，避免技术偏见
- 使用标准的EARS格式确保需求可测试性
- 建立清晰的验收标准，为后续测试提供依据
- 支持需求的版本管理和历史追踪

**完成规范创建后的指导：**

**✅ 功能规范创建完成！**

**下一步建议：**
- 在当前模块目录执行 `/plan` 开始技术设计阶段
- 确保需求已经过充分讨论和确认
- 考虑与其他相关模块的接口和依赖关系

**重要说明：**
- 本命令必须在模块目录中执行，确保需求与模块架构对应
- 生成的spec.md为后续plan和tasks阶段提供输入
- 支持需求的迭代更新和版本管理

使用绝对路径进行所有文件操作，确保规范文档的准确定位。