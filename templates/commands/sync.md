---
description: 同步模块进度到上级模块和项目路线图
scripts:
  sh: .specify/scripts/bash/sync-progress.sh --json
  ps: .specify/scripts/powershell/sync-progress.ps1 -Json
---

将当前模块的完成状态同步到父级模块和项目路线图中，保持进度的实时性和准确性。

执行步骤：

1. 运行 `{SCRIPT}` 获取当前模块路径和状态信息
2. 分析当前模块的完成情况：
   - 检查 spec.md 的完成状态
   - 检查 design.md 的完成状态
   - 检查 todo.md 的任务完成情况
   - 评估模块整体完成百分比

3. 检查子模块的完成状态：
   - 扫描 modules/ 目录下的所有子模块
   - 统计子模块的完成情况
   - 计算整体进度

4. 更新父级模块的 todo.md：
   - 如果当前模块有父级模块，更新父级的任务状态
   - 标记相关任务为完成状态
   - 更新父级模块的进度百分比

5. 更新项目路线图：
   - 更新 specs/roadmap.md 中对应模块的进度
   - 更新模块状态（进行中/已完成/阻塞）
   - 更新预计完成时间
   - 记录重要的里程碑达成

6. 生成进度报告：
   ```markdown
   ## 进度同步报告 - [日期]
   
   ### 当前模块：[模块路径]
   - 需求分析：✅ 已完成
   - 设计文档：✅ 已完成  
   - 任务清单：🔄 进行中 (85%)
   - 整体进度：85%
   
   ### 子模块状态：
   - auth/login：✅ 已完成
   - auth/register：🔄 进行中 (60%)
   - auth/oauth：📋 待开始
   
   ### 更新内容：
   - [具体更新了哪些文件]
   - [同步了哪些进度信息]
   - [发现的问题或风险]
   ```

7. 检查依赖关系：
   - 确认下游模块是否可以开始
   - 检查是否有阻塞的依赖
   - 更新依赖状态

8. 风险识别和告警：
   - 识别进度滞后的模块
   - 检查是否影响整体时间计划
   - 标记需要关注的风险点

9. 团队协作更新：
   - 更新团队共享的进度文档
   - 通知相关利益方
   - 记录重要的决策变更

**进度同步规则**：
- 子模块全部完成时，父模块状态自动更新
- 关键里程碑达成时，自动更新路线图
- 发现阻塞问题时，立即标记风险状态
- 时间计划有重大变更时，触发告警机制

**状态定义**：
- 📋 待开始：spec.md 未创建或为空
- 🔄 进行中：至少一个阶段已开始但未全部完成
- ✅ 已完成：spec、design、todo 三个阶段全部完成且验收通过
- ❌ 阻塞：遇到无法解决的依赖或技术问题
- ⚠️ 风险：进度滞后或存在潜在问题

**同步频率建议**：
- 模块阶段完成时：立即同步
- 每日工作结束时：同步当日进度
- 每周：全量检查和同步
- 里程碑节点：详细的进度审查和同步

使用绝对路径进行所有文件操作，确保同步信息的准确性。