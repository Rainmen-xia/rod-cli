---
description: 基于模块设计文档生成可执行的开发任务清单，支持TDD和并行开发
scripts:
  node: node .rod/scripts/generate-module-tasks.js --json
---

在当前模块目录中基于设计文档生成详细的开发任务清单，为实际编码提供清晰的执行路径。

**适配模块化架构：在模块上下文中生成任务，考虑模块间的开发依赖和协作**

执行步骤：

1. 运行 `{SCRIPT}` 获取当前模块路径和可用设计文档清单，解析MODULE_DIR和AVAILABLE_DOCS
2. 检查当前模块目录中的设计文档完整性：
   - 必需：plan.md（技术方案和技术栈）
   - 可选：data-model.md（数据实体设计）
   - 可选：contracts/（API接口定义）
   - 可选：research.md（技术决策记录）
   - 可选：quickstart.md（测试场景设计）

3. 如果缺少plan.md，提示用户先执行 `/plan` 完成技术设计

4. 分析设计文档并生成任务：
   - 使用 `.rod/spec-templates/tasks-template.md` 作为任务模板基础
   - 根据可用文档生成对应任务类型：
     * **环境搭建**：模块初始化、依赖安装、工具配置
     * **测试优先**：契约测试、集成测试（标记[P]支持并行）
     * **核心实现**：实体模型、服务逻辑、CLI命令、API端点
     * **模块集成**：数据库连接、中间件、日志记录
     * **质量保证**：单元测试、性能测试、文档更新（标记[P]）

5. 应用模块化任务生成规则：
   - 每个契约文件 → 生成契约测试任务（标记[P]）
   - 每个数据实体 → 生成模型创建任务（标记[P]）
   - 每个API端点 → 生成实现任务（共享文件不并行）
   - 每个用户故事 → 生成集成测试（标记[P]）
   - 考虑与其他模块的接口依赖

6. 按依赖关系排序任务：
   - 环境搭建 → 测试编写 → 核心实现 → 模块集成 → 质量保证
   - 严格遵循TDD原则：测试先行，实现跟随
   - 考虑模块间的开发依赖顺序

7. 在当前模块目录创建 `tasks.md`：
   - 包含模块名称和上下文信息
   - 提供编号任务（T001, T002等）
   - 明确文件路径和依赖关系
   - 包含并行执行指导和示例

8. 报告完成状态，包括任务总数、并行任务数量，以及下一步执行 `/progress` 的指导

**模块化任务特性**：
- 自动识别模块在整体项目中的依赖关系
- 生成适合模块边界的任务粒度
- 支持模块级别的并行开发和测试
- 为后续进度跟踪提供标准化任务格式

**任务执行原则**：
- 每个任务足够具体，LLM可以独立完成
- 优先级明确，支持增量交付
- 测试驱动开发，确保代码质量
- 支持团队协作和进度跟踪

**完成任务生成后的指导：**

**✅ 开发任务清单生成完成！**

**下一步建议：**
- 开始执行tasks.md中的具体开发任务
- 完成关键阶段后及时执行 `/progress` 同步开发进度
- 优先完成标记[P]的并行任务以提高效率
- 模块集成阶段注意与其他模块的协调

**重要说明：**
- 任务基于当前模块的设计文档生成
- 支持TDD开发模式和并行执行
- 为进度跟踪和项目管理提供基础数据

上下文信息：{ARGS}

生成的tasks.md应当立即可执行，每个任务都足够具体，无需额外澄清即可开始实施。